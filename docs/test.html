<!DOCTYPE html>
<html>
<head>
    <title>Test Talk Like An X JS</title>
    <script src="js/text-transformer.js"></script>
    <script src="js/special-filters.js"></script>
</head>
<body>
    <h1>Testing JavaScript Implementation</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');

        function test(name, fn) {
            try {
                const result = fn();
                results.innerHTML += `<p style="color: green;">✓ ${name}: ${result}</p>`;
            } catch (error) {
                results.innerHTML += `<p style="color: red;">✗ ${name}: ${error.message}</p>`;
            }
        }

        test('Substitution basic', () => {
            const filter = new TextFilter();
            filter.add(new Substitution({ 'hello': 'hey' }));
            const result = filter.transform('Hello world');
            if (result === 'Hey world') return 'PASS';
            throw new Error(`Expected "Hey world", got "${result}"`);
        });

        test('Character substitution', () => {
            const filter = new TextFilter();
            filter.add(new CharacterSubstitution({ 'th': 'd' }));
            const result = filter.transform('the theater');
            if (result === 'de deater') return 'PASS';
            throw new Error(`Expected "de deater", got "${result}"`);
        });

        test('Suffix replacer', () => {
            const filter = new TextFilter();
            const suffix = new SuffixReplacer();
            suffix.addRule('ing', "in'");
            filter.add(suffix);
            const result = filter.transform('singing');
            if (result === "singin'") return 'PASS';
            throw new Error(`Expected "singin'", got "${result}"`);
        });

        test('Duck transformer', () => {
            const duck = new DuckTransformer();
            const result = duck.transform('Hello world');
            if (result === 'Quack quack') return 'PASS';
            throw new Error(`Expected "Quack quack", got "${result}"`);
        });

        test('Glitch transformer', () => {
            const glitch = new GlitchTransformer(100, 42);
            const result = glitch.transform('test');
            if (result.length === 4 && result !== 'test') return 'PASS';
            throw new Error(`Expected glitched text, got "${result}"`);
        });

        test('Studly transformer', () => {
            const studly = new StudlyTransformer(42);
            const result = studly.transform('hello');
            if (result.length === 5 && result !== 'hello' && result !== 'HELLO') return 'PASS';
            throw new Error(`Expected studly caps, got "${result}"`);
        });
    </script>
</body>
</html>
