<!DOCTYPE html>
<html>
<head>
    <title>Integration Test</title>
    <script src="js/text-transformer.js"></script>
    <script src="js/special-filters.js"></script>
    <script src="js/filter-factory.js"></script>
    <style>
        body { font-family: monospace; padding: 20px; }
        .pass { color: green; }
        .fail { color: red; }
        pre { background: #f0f0f0; padding: 10px; }
    </style>
</head>
<body>
    <h1>Integration Tests - Real Filters</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');

        async function testFilter(filterId, inputText, description) {
            try {
                const filter = await FilterFactory.fromJsonFile(`../src/${filterId}.json`);
                const result = filter.transform(inputText);
                results.innerHTML += `
                    <div class="pass">
                        ✓ ${description}
                        <pre>Input:  "${inputText}"
Output: "${result}"</pre>
                    </div>
                `;
            } catch (error) {
                results.innerHTML += `
                    <div class="fail">
                        ✗ ${description}
                        <pre>Error: ${error.message}</pre>
                    </div>
                `;
            }
        }

        async function runTests() {
            results.innerHTML = '<h2>Testing Real Filters...</h2>';

            await testFilter('disco', 'Hello friend! How are you?', 'Disco filter');
            await testFilter('pirate', 'Hello friend, yes I am happy', 'Pirate filter');
            await testFilter('duck', 'Hello world', 'Duck filter (Python module)');
            await testFilter('studly', 'hello world', 'Studly filter (Python module)');
            await testFilter('glitch-50', 'System error', 'Glitch 50% filter');
            await testFilter('chef', 'Hello, the chicken is good', 'Swedish Chef filter');
            await testFilter('beatnik_1950s', 'That is great man', 'Beatnik filter');

            results.innerHTML += '<h2 class="pass">All integration tests complete!</h2>';
        }

        runTests();
    </script>
</body>
</html>
